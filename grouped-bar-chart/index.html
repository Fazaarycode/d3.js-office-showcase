<html>
  <head>
  </head>
  <style> /* set the CSS */
        body { font: 12px Arial;}
        path { 
            stroke: steelblue;
            stroke-width: 2;
            fill: none;
        }
        .axis path,
        .axis line {
            fill: none;
            stroke: grey;
            stroke-width: 1;
            shape-rendering: crispEdges;
        }
        .legend {
            font-size: 16px;
            font-weight: bold;
            text-anchor: middle;
        }
        </style>
  <body>
    <div id='d3Id'></div>
    <script src="https://d3js.org/d3.v4.min.js"></script></body>
    <script>
   d3.csv('vehicles.csv', function(err,csvData){
    var container = d3.select('#d3Id').append('p').
    text('All India And State-wise Number Of Taxed And Tax-Exempted Motor Vehicles Registered In India'),
      width = 520,
      height = 220,
      margin = {top: 30, right: 20, bottom: 30, left: 50},
      barPadding = .2,
      axisTicks = {qty: 5, outerSize: 0, dateFormat: '%m-%d'};
      var svg = container
        .append("svg")
        .attr("width", width)
        .attr("height", height)
        .append("g")
        .attr("transform", `translate(70,${margin.top})`);
     var xScale0 = d3
            .scaleBand()
            .range([0, width - margin.left - margin.right])
            .padding(barPadding)
   
    var xScale1 = d3.scaleBand()
    
    var yScale = d3.scaleLinear().range([height - margin.top - margin.bottom, 0])
   
    var xAxis = d3.axisBottom(xScale0).tickSizeOuter(axisTicks.outerSize);
    
    var yAxis = d3.axisLeft(yScale).ticks(axisTicks.qty).tickSizeOuter(axisTicks.outerSize);
   
    xScale0.domain(csvData.map(d => d['Year'])) //Display this on the bottom

    xScale1.domain(['Twowheelers', 'Cars']).range([0, xScale0.bandwidth()])

    yScale.domain([0, d3.max(csvData, d => d['Twowheelers'] > d['Cars'] ? d['Twowheelers'] 
    : d['Cars']
    )
    ])

var model_name = svg.selectAll(".model_name")
  .data(csvData)
  .enter().append("g")
  .attr("class", "model_name")
  .attr("transform", d => `translate(${xScale0(d.Year)},0)`);

/* Add field1 bars */
model_name.selectAll(".bar.field1")
  .data(d => [d])
  .enter()
  .append("rect")
  .attr("class", "bar field1")
.style("fill","steelblue")
  .attr("x", d => xScale1('Twowheelers'))
  .attr("y", d => yScale(d['Twowheelers']))
  .attr("width", xScale1.bandwidth())
  .attr("height", d => {
    return height - margin.top - margin.bottom - yScale(d['Twowheelers'])
  });
  
/* Add field2 bars */
    model_name.selectAll(".bar.field2")
    .data(d => [d])
    .enter()
    .append("rect")
    .attr("class", "bar field2")
    .style("fill","orange")
    .attr("x", d => xScale1('Cars'))
    .attr("y", d => yScale(d.Cars))
    .attr("width", xScale1.bandwidth())
    .attr("height", d => {
        return height - margin.top - margin.bottom - yScale(d.Cars)
    });

   // Add . . the X Axis
   svg.append("g")
     .attr("class", "x axis")
     .attr("transform", `translate(0,${height - margin.top -  margin.bottom})`)
     .call(xAxis);// Add the Y Axis
svg.append("g")
     .attr("class", "y axis")
     .call(yAxis);

   }) // END


    </script>

    </html>